ШАЛАШОВ АНДРЕЙ ЮРЬЕВИЧ ИТ-5

Поставленная задача:
«Почтальон» Мудрый тритон работает почтальоном в Лукоморье. В перечень его обязанностей входит доставка корреспонденции птицам, разместившим свои гнезда на ветвях дуба (постепенно вытеснив оттуда русалку). Птицы вьют свои гнезда там, 
где ветка дерева разделяется на несколько более тонких веток. Лукоморье является районом с развитой инфраструктурой, поэтому все разветвления на дубе заняты гнездами птиц. За время работы тритон не только запомнил, где кто живет, но 
и уяснил, что если его путь проходит через чье-либо гнездо, и его обитатели не получают при этом корреспонденции, ему приходится извиняться за доставленные неудобства. Естественно, интеллигентный тритон стремится как можно меньше 
беспокоить обитателей дуба, поэтому он заранее планирует свой маршрут так, чтобы приносить минимальное число извинений.

Напишите программу, которая по описанию мест обитания птиц и списку корреспонденции определяет, сколько раз придется извиняться мудрому тритону.

Каждое гнездо дуба обозначено уникальным номером, что соответствует номеру квартиры, который мы иногда указываем, отправляя письма родным и близким по обычной почте. Гнездо, расположенное на первой развилке ствола имеет номер один. 
Тритон может только ползти по веткам или стволу дуба, прыжки и перелеты полностью исключены. Никакие ветки не соприкасаются и не пересекаются.

Формат входного файла: в первой строке входного файла находится число M – количество гнезд на дубе (0<M<1000). В следующих M строках находится информация о размещении гнезд и количестве писем для каждого из возможных адресатов. 
Первые два числа ni и li – количество соседей гнезда с номером i и количество направленных по этому адресу писем соответственно. Далее в строке приводится ni чисел – номера гнезд, являющихся соседними с гнездом c номером i.

Формат выходного файла: в единственной строке выходного файла должно содержаться единственное число – минимальное количество извинений, которые придется приносить мудрому тритону, для того чтобы доставить все письма.

Пример:

(входной файл)
5
3 2 2 5 4
1 1 1
1 1 4
2 2 3 1
1 3 1

(выходной файл)
2


Выбранная структура данных:
Список смежности (реализованный как словарь):
Идеально представляет древовидную структуру (ветвящиеся гнезда)

Преимущества:
Быстрый доступ к соседним узлам (O(1))
Экономия памяти (хранит только существующие связи)
Удобна для обходов (DFS/BFS)

Словарь родителей:
Позволяет быстро восстанавливать пути от любого гнезда к корню

Словарь писем:
Обеспечивает мгновенную проверку наличия писем в гнезде


Алгоритм решения:
Построение дерева: Формируем связи "родитель-потомок" для последующего поиска путей
Вычисление путей (обратный проход по родителям): Эффективный способ найти путь от корня без рекурсии
Подсчет извинений: Учитываем только гнезда без писем, не являющиеся текущей целью

Обработка исключений:
Чтение файла: (файл не существует/нет прав)
Валидация данных: Гарантирует корректность структуры входных данных
Запись результата: Защита от проблем с записью (диск полон/нет прав)

Классы:
Dubo: Инкапсулирует логику работы с деревом
UserInterface: Отвечает за взаимодействие с пользователем

Инкапсуляция:
Все поля классов (tree, letters и др.) приватные (по соглашению, через self._)
Доступ только через методы класса

Наследование и полиморфизм не используются:
В данной задаче нет:
Иерархии объектов (все гнезда одинаковы)
Необходимости переопределять методы

Процедурный стиль в методах:
Алгоритм линейный и не требует сложной объектной модели
